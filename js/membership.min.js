var facebookAppId;((e,a,o)=>{var t=e.getElementsByTagName(a)[0];e.getElementById(o)||((e=e.createElement(a)).id=o,e.src="//connect.facebook.net/en_US/sdk.js",t.parentNode.insertBefore(e,t))})(document,"script","facebook-jssdk"),(facebookAppId="undefined"!=typeof mkdfSocialLoginVars?mkdfSocialLoginVars.social.facebookAppId:facebookAppId)&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.5"}),window.FB=FB}),(s=>{var e={};function a(){var e=s(".mkdf-modal-opener"),o=s(".mkdf-modal-holder"),t=s(".mkdf-login-popup-close-btn");e.length&&o.length&&(e.on("click",function(e){e.preventDefault();var a=s(this).data("modal");o.fadeOut(300),o.removeClass("opened"),o.each(function(){var e=s(this);"undefined"!==e.data("modal")&&e.data("modal")===a&&(e.fadeIn(300),e.addClass("opened"))})}),o.each(function(){var a=s(this);a.on("click",function(e){a.hasClass("opened")&&(a.fadeOut(300),a.removeClass("opened"))}),t.on("click",function(e){a.hasClass("opened")&&(a.fadeOut(300),a.removeClass("opened"))}),s(window).on("keyup",function(e){a.hasClass("opened")&&27===e.keyCode&&(a.fadeOut(300),a.removeClass("opened"))}),a.find(".mkdf-modal-content").on("click",function(e){e.stopPropagation()})}))}function o(){s(".mkdf-login-form").on("submit",function(e){e.preventDefault();e={action:"bagoti_membership_login_user",security:s(this).find("#mkdf-login-security").val(),login_data:s(this).serialize()};return s.ajax({type:"POST",data:e,url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"===e.status&&(window.location=e.redirect)}}),!1})}function t(){s(".mkdf-register-form").on("submit",function(e){e.preventDefault();e={action:"bagoti_membership_register_user",security:s(this).find("#mkdf-register-security").val(),register_data:s(this).serialize()};return s.ajax({type:"POST",data:e,url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"===e.status&&(window.location=e.redirect)}}),!1})}function n(){var a=s(".mkdf-reset-pass-form");a.on("submit",function(e){e.preventDefault();e={action:"bagoti_membership_user_lost_password",user_login:a.find("#user_reset_password_login").val()};s.ajax({type:"POST",data:e,url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"===e.status&&(window.location=e.redirect)}})})}function i(e){var a=s(".mkdf-membership-response-holder"),o=_.template(s(".mkdf-membership-response-template").html()),t="success"===e.status?"mkdf-membership-message-succes":"mkdf-membership-message-error",o=o({messageClass:t,message:e.message});a.html(o)}function d(){s(".mkdf-facebook-login-holder").on("submit",function(e){e.preventDefault(),window.FB.login(function(e){{var o;"connected"===(e=e).status?(o=e.authResponse.accessToken,console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(e){var a=s(".mkdf-facebook-login-holder [name^=mkdf_nonce_facebook_login]").val();e.nonce=a,e.image=e.picture.data.url,e.accessToken=o,s.ajax({type:"POST",data:{action:"bagoti_membership_check_facebook_user",response:e},url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);i(e),"success"===e.status&&(window.location=e.redirect)}})})):"not_authorized"===e.status?console.log("Please log into this app"):console.log("Please log into Facebook")}},{scope:"email, public_profile"})})}"undefined"!=typeof mkdf&&(mkdf.modules.socialLogin=e),e.mkdfUserLogin=o,e.mkdfUserRegister=t,e.mkdfUserLostPassword=n,e.mkdfInitWidgetModal=a,e.mkdfInitFacebookLogin=d,e.mkdfRenderAjaxResponseMessage=i,s(document).ready(function(){a(),o(),t(),n(),(()=>{var e=s(".mkdf-login-tabs");e.length&&e.each(function(){var e=s(this);e.children(".mkdf-tab-container").each(function(e){e+=1;var a=s(this),o=a.attr("id"),a=a.parent().find(".mkdf-tabs-nav li:nth-child("+e+") a"),e=a.attr("href");-1<(o="#"+o).indexOf(e)&&a.attr("href",o)}),e.tabs(),s(".mkdf-login-tabs a.mkdf-external-link").unbind("click")})})()}),s(window).on("load",function(){d(),(()=>{s(".mkdf-membership-main-wrapper");var e=s(".page-template-user-dashboard .mkdf-content"),a=s(".mkdf-page-footer"),o=0;!mkdf.body.hasClass("mkdf-header-transparent")&&1024<mkdf.windowWidth&&(o=o+mkdfGlobalVars.vars.mkdfMenuAreaHeight+mkdfGlobalVars.vars.mkdfLogoAreaHeight),0<a.length&&(o+=a.outerHeight()),1024<mkdf.windowWidth&&(a=mkdf.windowHeight-o,e.css({"min-height":a+"px"}))})()})})(jQuery),(t=>{var e={};function a(){o(),t(document.body).on("bagoti_membership_favorites_trigger",function(){o()})}function o(){t(".mkdf-membership-item-favorites").on("click",function(e){e.preventDefault();var a,o,e=t(this);void 0!==e.data("item-id")&&(a=e.data("item-id")),o=e,e={action:"bagoti_membership_add_item_to_favorites",item_id:e=a},t.ajax({type:"POST",data:e,url:mkdfGlobalVars.vars.mkdfAjaxUrl,success:function(e){e=JSON.parse(e);"success"===e.status&&(o.hasClass("mkdf-icon-only")||o.find("span").text(e.data.message),o.find(".mkdf-favorites-icon").removeClass("mkdf-favorite-inactive mkdf-favorite-active").addClass(e.data.icon))}})})}(mkdf.modules.membershipFavorites=e).mkdfOnDocumentReady=a,t(document).ready(a)})(jQuery);